package ToolsForTasks;


import java.io.BufferedReader;
import java.io.*;
import java.util.*;

public class JobList {
	 private List<Job> jobs = new ArrayList<>();
	    private static final String FILE_NAME = "jobs.csv";
	    Scanner scanner = new Scanner(System.in);

	    public JobList() {
	        loadFromFile();
	    }

	    public void addJob() {
	    	System.out.println("Name: ");
	    	String name = scanner.nextLine();
	    	System.out.println("Description: ");
	    	String description = scanner.nextLine();
	    	
	        jobs.add(new Job(name, description));
	        saveToFile();
	    }

	    public void editJob(String oldTitle, String newTitle, String newDescription) {
	        for (Job job : jobs) {
	            if (job.getTitle().equalsIgnoreCase(oldTitle)) {
	                job.setTitle(newTitle);
	                job.setDescription(newDescription);
	                saveToFile();
	                return;
	            }
	        }
	    }

	    public void deleteJob(String title) {
	        jobs.removeIf(job -> job.getTitle().equalsIgnoreCase(title));
	        saveToFile();
	    }

	    public Job searchJob(String title) {
	        for (Job job : jobs) {
	            if (job.getTitle().equalsIgnoreCase(title)) {
	                return job;
	            }
	        }
	        return null;
	    }

	    public void displayJobs() {
	        for (Job job : jobs) {
	            System.out.println(job);
	        }
	    }

	    private void loadFromFile() {
	        try (BufferedReader br = new BufferedReader(new FileReader(FILE_NAME))) {
	            String line;
	            while ((line = br.readLine()) != null) {
	                String[] data = line.split(",");
	                jobs.add(new Job(data[0].trim(), data[1].trim()));
	            }
	        } catch (IOException ignored) {
	        }
	    }

	    private void saveToFile() {
	        try (BufferedWriter bw = new BufferedWriter(new FileWriter(FILE_NAME))) {
	            for (Job job : jobs) {
	                bw.write(job.getTitle() + "," + job.getDescription());
	                bw.newLine();
	            }
	        } catch (IOException e) {
	            e.printStackTrace();
	        }
	    }
}
