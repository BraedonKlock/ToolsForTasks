package ToolsForTasks;


import java.io.*;
import java.util.*;

public class JobList {
	 private static List<Job> JobList = new ArrayList<>();
	    private static final String FILE_NAME = "jobs.csv";
	    static Scanner scanner = new Scanner(System.in);

	    public JobList() {
	        loadFromFile();
	    }

	    public static void addJob() {
	    	System.out.println("Name: ");
	    	String name = scanner.nextLine();
	    	System.out.println("Description: ");
	    	String description = scanner.nextLine();
	    	String toolName;
	    	String quantity;
	    	
	  
	    	System.out.print("Add tool: ");
	    	toolName = scanner.nextLine();
	    	System.out.println("Quantity: ");
	    	quantity = scanner.nextLine();
	 
	    	
	    	Tool tool = new Tool(toolName, quantity);
	    	
	        JobList.add(new Job(name, description, tool ));
	        saveToFile();
	    }

	    public static void editJob() {
	      
	    }

	    public static void deleteJob() {
	    }

	    public static void searchJob() {
	    }

	    public static void listJobs() {
	    	if (JobList.isEmpty()) {
	    		System.out.println("Job list is empty");
	    	}
	        for (Job job : JobList) {
	            System.out.println("Name: " + Job.getName() + "\nDescription: " + Job.getDescription() + "\nJOB TOOLS \n" + Job.getTool());
	        }
	    }

	    static void loadFromFile() {
	        try (BufferedReader br = new BufferedReader(new FileReader(FILE_NAME))) {
	            String line;
	            while ((line = br.readLine()) != null) {
	                String[] data = line.split(",");
	                JobList.add(new Job(data[0].trim(), data[1].trim(), new Tool(data[2].trim(), data[3].trim())));

	            }
	        } catch (IOException ignored) {
	        }
	    }

	    private static void saveToFile() {
	    	 String fileName = "jobs.csv";
	    	 try (FileWriter writer = new FileWriter(fileName)) {
	    		    for (Job job : JobList) {
	    		        Tool tool = job.getTool(); // get the tool from the job

	    		        writer.append(job.getName()).append(",");
	    		        writer.append(job.getDescription()).append(",");
	    		        writer.append(tool.getName()).append(",");
	    		        writer.append(tool.getQuantity()).append("\n"); // no comma after last field
	    		    }
	    		    System.out.println("Jobs saved successfully.");
	    		} catch (IOException e) {
	    		    System.out.println("Error saving file: " + e.getMessage());
	    		}
	    }
}
